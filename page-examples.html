<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdali: Examples</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libdali
   &#160;<span id="projectnumber">1.8.0</span>
   </div>
   <div id="projectbrief">The DataLink client library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">libdali: the DataLink client library</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Examples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#example-simple">Simple client</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="example-simple"></a>
Simple client</h1>
<p>A simple DataLink client:</p>
<div class="fragment"><div class="line"><span class="comment">/***************************************************************************</span></div>
<div class="line"><span class="comment"> * daliclient.c</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * An example DataLink client demonstrating the use of libdali.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Connects to a DataLink server, configures a connection and collects</span></div>
<div class="line"><span class="comment"> * data.  Detailed information about the data received can be printed.</span></div>
<div class="line"><span class="comment"> ***************************************************************************/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;time.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="libdali_8h.html">libdali.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><span class="preprocessor">  #define strcasecmp _stricmp</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define PACKAGE &quot;daliclient&quot;</span></div>
<div class="line"><span class="preprocessor">#define VERSION LIBDALI_VERSION</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> verbose   = 0;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">char</span> *statefile     = 0;     <span class="comment">/* State file for saving/restoring state */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">char</span> *matchpattern  = 0;     <span class="comment">/* Source ID matching expression */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">char</span> *rejectpattern = 0;     <span class="comment">/* Source ID rejecting expression */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">char</span> *infotype      = 0;     <span class="comment">/* INFO type to request */</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> DLCP *dlconn;                <span class="comment">/* Connection parameters */</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> parameter_proc (<span class="keywordtype">int</span> argcount, <span class="keywordtype">char</span> **argvec);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> usage (<span class="keywordtype">void</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">  DLPacket dlpack;</div>
<div class="line">  <span class="keywordtype">char</span> packetdata[<a class="code" href="libdali_8h.html#ac5b738d467a1bbf9325bcc0eaf4f5efa">MAXPACKETSIZE</a>];</div>
<div class="line">  <span class="keywordtype">char</span> timestr[50];</div>
<div class="line">  <span class="keywordtype">char</span> *infobuf = 0;</div>
<div class="line">  <span class="keywordtype">int</span> infolen;</div>
<div class="line">  <span class="keywordtype">int</span> endflag = 0;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Process given parameters (command line and parameter file) */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( parameter_proc (argc, argv) &lt; 0 )</div>
<div class="line">    {</div>
<div class="line">      fprintf (stderr, <span class="stringliteral">&quot;Parameter processing failed\n\n&quot;</span>);</div>
<div class="line">      fprintf (stderr, <span class="stringliteral">&quot;Try &#39;-h&#39; for detailed help\n&quot;</span>);</div>
<div class="line">      <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Connect to server */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( <a class="code" href="group__network.html#gac26d1376529c62dc85ae3ae90f2d0279">dl_connect</a> (dlconn) &lt; 0 )</div>
<div class="line">    {</div>
<div class="line">      fprintf (stderr, <span class="stringliteral">&quot;Error connecting to server\n&quot;</span>);</div>
<div class="line">      <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Reposition connection */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( dlconn-&gt;pktid &gt; 0 )</div>
<div class="line">    {</div>
<div class="line">      <span class="keywordflow">if</span> ( <a class="code" href="group__connection.html#ga823f483f8492e0317a5221c3f02b13d0">dl_position</a> (dlconn, dlconn-&gt;pktid, dlconn-&gt;pkttime) &lt; 0 )</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Send match pattern if supplied */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( matchpattern )</div>
<div class="line">    {</div>
<div class="line">      <span class="keywordflow">if</span> ( <a class="code" href="group__connection.html#ga0a7501ffdf01f73f8e5b1c1b9ca29843">dl_match</a> (dlconn, matchpattern) &lt; 0 )</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Send reject pattern if supplied */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( rejectpattern )</div>
<div class="line">    {</div>
<div class="line">      <span class="keywordflow">if</span> ( <a class="code" href="group__connection.html#gaffcdbcae2611a8c6208243bc2a418149">dl_reject</a> (dlconn, rejectpattern) &lt; 0 )</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Request INFO and print returned XML */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( infotype )</div>
<div class="line">    {</div>
<div class="line">      <span class="keywordflow">if</span> ( (infolen = <a class="code" href="group__connection.html#ga812ede0c3d5e15ab118c489087b01260">dl_getinfo</a> (dlconn, infotype, matchpattern, &amp;infobuf, 0)) &lt; 0 )</div>
<div class="line">    {</div>
<div class="line">      <a class="code" href="group__logging.html#ga01468a28cd2b8d80c420191ece24a8a4">dl_log</a> (2, 0, <span class="stringliteral">&quot;Problem requesting INFO from server\n&quot;</span>);</div>
<div class="line">      <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">      printf (<span class="stringliteral">&quot;%.*s\n&quot;</span>, infolen, infobuf);</div>
<div class="line"> </div>
<div class="line">      <span class="keywordflow">if</span> ( infobuf )</div>
<div class="line">    free (infobuf);</div>
<div class="line">    }</div>
<div class="line">  <span class="comment">/* Otherwise collect packets in STREAMing mode */</span></div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">      <span class="comment">/* Collect packets in streaming mode */</span></div>
<div class="line">      <span class="keywordflow">while</span> ( <a class="code" href="group__connection.html#gaccca46f231c23fd495bb6d5725e97957">dl_collect</a> (dlconn, &amp;dlpack, packetdata, <span class="keyword">sizeof</span>(packetdata), endflag) == <a class="code" href="libdali_8h.html#a38e35b13505789106b8895697a16d260">DLPACKET</a> )</div>
<div class="line">    {</div>
<div class="line">      <a class="code" href="group__time-related.html#ga66fcac401763aecfe83deb9f53186752">dl_dltime2seedtimestr</a> (dlpack.datastart, timestr, 1);</div>
<div class="line"> </div>
<div class="line">      <a class="code" href="group__logging.html#ga01468a28cd2b8d80c420191ece24a8a4">dl_log</a> (0, 0, <span class="stringliteral">&quot;Received %s (%&quot;</span> PRId64 <span class="stringliteral">&quot;), %s, %d\n&quot;</span>,</div>
<div class="line">          dlpack.streamid, dlpack.pktid, timestr, dlpack.datasize);</div>
<div class="line">    }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Make sure everything is shut down and save the state file */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( dlconn-&gt;link != -1 )</div>
<div class="line">    <a class="code" href="group__network.html#ga5b31313fabb3c66918276e87695dec16">dl_disconnect</a> (dlconn);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Save the state file */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( statefile )</div>
<div class="line">    <a class="code" href="group__connection.html#ga7e326b372c26d47a072cd6ec112e1852">dl_savestate</a> (dlconn, statefile);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> ( dlconn )</div>
<div class="line">    <a class="code" href="group__connection.html#ga7603e72f54c34879f86c319239a50e52">dl_freedlcp</a> (dlconn);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}  <span class="comment">/* End of main() */</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/***************************************************************************</span></div>
<div class="line"><span class="comment"> * parameter_proc:</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Process the command line parameters.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Returns 0 on success, and -1 on failure</span></div>
<div class="line"><span class="comment"> ***************************************************************************/</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">parameter_proc (<span class="keywordtype">int</span> argcount, <span class="keywordtype">char</span> **argvec)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">char</span> *address = 0;</div>
<div class="line">  <span class="keywordtype">int</span> keepalive = -1;</div>
<div class="line">  <span class="keywordtype">int</span> optind;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Process all command line arguments */</span></div>
<div class="line">  <span class="keywordflow">for</span> (optind = 1; optind &lt; argcount; optind++)</div>
<div class="line">    {</div>
<div class="line">      <span class="keywordflow">if</span> (strcmp (argvec[optind], <span class="stringliteral">&quot;-V&quot;</span>) == 0)</div>
<div class="line">    {</div>
<div class="line">      fprintf(stderr, <span class="stringliteral">&quot;%s version: %s\n&quot;</span>, PACKAGE, VERSION);</div>
<div class="line">      exit (0);</div>
<div class="line">    }</div>
<div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp (argvec[optind], <span class="stringliteral">&quot;-h&quot;</span>) == 0)</div>
<div class="line">    {</div>
<div class="line">      usage();</div>
<div class="line">      exit (0);</div>
<div class="line">    }</div>
<div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (argvec[optind], <span class="stringliteral">&quot;-v&quot;</span>, 2) == 0)</div>
<div class="line">    {</div>
<div class="line">      verbose += strspn (&amp;argvec[optind][1], <span class="stringliteral">&quot;v&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp (argvec[optind], <span class="stringliteral">&quot;-k&quot;</span>) == 0)</div>
<div class="line">    {</div>
<div class="line">      keepalive = strtoul (argvec[++optind], NULL, 10);</div>
<div class="line">    }</div>
<div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp (argvec[optind], <span class="stringliteral">&quot;-m&quot;</span>) == 0)</div>
<div class="line">    {</div>
<div class="line">      matchpattern = argvec[++optind];</div>
<div class="line">    }</div>
<div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp (argvec[optind], <span class="stringliteral">&quot;-r&quot;</span>) == 0)</div>
<div class="line">    {</div>
<div class="line">      rejectpattern = argvec[++optind];</div>
<div class="line">    }</div>
<div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp (argvec[optind], <span class="stringliteral">&quot;-i&quot;</span>) == 0)</div>
<div class="line">    {</div>
<div class="line">      infotype = argvec[++optind];</div>
<div class="line">    }</div>
<div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp (argvec[optind], <span class="stringliteral">&quot;-x&quot;</span>) == 0)</div>
<div class="line">    {</div>
<div class="line">      statefile = argvec[++optind];</div>
<div class="line">    }</div>
<div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (argvec[optind], <span class="stringliteral">&quot;-&quot;</span>, 1 ) == 0)</div>
<div class="line">    {</div>
<div class="line">      fprintf(stderr, <span class="stringliteral">&quot;Unknown option: %s\n&quot;</span>, argvec[optind]);</div>
<div class="line">      exit (1);</div>
<div class="line">    }</div>
<div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ! address )</div>
<div class="line">    {</div>
<div class="line">      address = argvec[optind];</div>
<div class="line">    }</div>
<div class="line">      <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">      fprintf(stderr, <span class="stringliteral">&quot;Unknown option: %s\n&quot;</span>, argvec[optind]);</div>
<div class="line">      exit (1);</div>
<div class="line">    }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Make sure a server was specified */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( ! address )</div>
<div class="line">    {</div>
<div class="line">      fprintf(stderr, <span class="stringliteral">&quot;No DataLink server specified\n\n&quot;</span>);</div>
<div class="line">      fprintf(stderr, <span class="stringliteral">&quot;%s version: %s\n\n&quot;</span>, PACKAGE, VERSION);</div>
<div class="line">      fprintf(stderr, <span class="stringliteral">&quot;Usage: %s [options] [host][:][port]\n&quot;</span>, PACKAGE);</div>
<div class="line">      fprintf(stderr, <span class="stringliteral">&quot;Try &#39;-h&#39; for detailed help\n&quot;</span>);</div>
<div class="line">      exit (1);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Allocate and initialize a new connection description */</span></div>
<div class="line">  dlconn = <a class="code" href="group__connection.html#ga663e07d45c7acd0377b5f1f4d930b5a7">dl_newdlcp</a> (address, argvec[0]);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Set keepalive parameter, allow for valid value of 0 */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( keepalive &gt;= 0 )</div>
<div class="line">    dlconn-&gt;keepalive = keepalive;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Initialize the verbosity for the dl_log function */</span></div>
<div class="line">  <a class="code" href="group__logging.html#ga37eb5ed80e669d3812a2d1f0e23d8500">dl_loginit</a> (verbose, NULL, NULL, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Report the program version */</span></div>
<div class="line">  <a class="code" href="group__logging.html#ga01468a28cd2b8d80c420191ece24a8a4">dl_log</a> (0, 1, <span class="stringliteral">&quot;%s version: %s\n&quot;</span>, PACKAGE, VERSION);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Load the match stream list from a file if the argument starts with &#39;@&#39; */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( matchpattern &amp;&amp; *matchpattern == <span class="charliteral">&#39;@&#39;</span> )</div>
<div class="line">    {</div>
<div class="line">      <span class="keywordtype">char</span> *filename = matchpattern + 1;</div>
<div class="line"> </div>
<div class="line">      <span class="keywordflow">if</span> ( ! (matchpattern = <a class="code" href="group__connection.html#gaf6cbef6eaaad5e0e54bd93af3a4bf728">dl_read_streamlist</a> (dlconn, filename)) )</div>
<div class="line">    {</div>
<div class="line">      <a class="code" href="group__logging.html#ga01468a28cd2b8d80c420191ece24a8a4">dl_log</a> (2, 0, <span class="stringliteral">&quot;Cannot read matching list file: %s\n&quot;</span>, filename);</div>
<div class="line">      exit (1);</div>
<div class="line">    }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Load the reject stream list from a file if the argument starts with &#39;@&#39; */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( rejectpattern &amp;&amp; *rejectpattern == <span class="charliteral">&#39;@&#39;</span> )</div>
<div class="line">    {</div>
<div class="line">      <span class="keywordtype">char</span> *filename = rejectpattern + 1;</div>
<div class="line"> </div>
<div class="line">      <span class="keywordflow">if</span> ( ! (rejectpattern = <a class="code" href="group__connection.html#gaf6cbef6eaaad5e0e54bd93af3a4bf728">dl_read_streamlist</a> (dlconn, filename)) )</div>
<div class="line">    {</div>
<div class="line">      <a class="code" href="group__logging.html#ga01468a28cd2b8d80c420191ece24a8a4">dl_log</a> (2, 0, <span class="stringliteral">&quot;Cannot read rejecting list file: %s\n&quot;</span>, filename);</div>
<div class="line">      exit (1);</div>
<div class="line">    }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Recover from the state file and reposition */</span></div>
<div class="line">  <span class="keywordflow">if</span> ( statefile )</div>
<div class="line">    {</div>
<div class="line">      <span class="keywordflow">if</span> ( <a class="code" href="group__connection.html#ga3a993121cf88eeb7d74e007ddd2203ec">dl_recoverstate</a> (dlconn, statefile) &lt; 0 )</div>
<div class="line">    {</div>
<div class="line">      <a class="code" href="group__logging.html#ga01468a28cd2b8d80c420191ece24a8a4">dl_log</a> (2, 0, <span class="stringliteral">&quot;Error reading state file\n&quot;</span>);</div>
<div class="line">      exit (1);</div>
<div class="line">    }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}  <span class="comment">/* End of parameter_proc() */</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/***************************************************************************</span></div>
<div class="line"><span class="comment"> * usage:</span></div>
<div class="line"><span class="comment"> * Print the usage message and exit.</span></div>
<div class="line"><span class="comment"> ***************************************************************************/</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">usage (<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">  fprintf (stderr, <span class="stringliteral">&quot;\nUsage: %s [options] [host][:][port]\n\n&quot;</span>, PACKAGE);</div>
<div class="line">  fprintf (stderr,</div>
<div class="line">       <span class="stringliteral">&quot; ## General program options ##\n&quot;</span></div>
<div class="line">       <span class="stringliteral">&quot; -V             report program version\n&quot;</span></div>
<div class="line">       <span class="stringliteral">&quot; -h             show this usage message\n&quot;</span></div>
<div class="line">       <span class="stringliteral">&quot; -v             be more verbose, multiple flags can be used\n&quot;</span></div>
<div class="line">       <span class="stringliteral">&quot; -k secs        specify keepalive interval in seconds\n&quot;</span></div>
<div class="line">       <span class="stringliteral">&quot; -m match       specify stream ID matching pattern\n&quot;</span></div>
<div class="line">       <span class="stringliteral">&quot; -r reject      specify stream ID rejecting pattern\n&quot;</span></div>
<div class="line">       <span class="stringliteral">&quot; -i type        request INFO type, print XML and exit\n&quot;</span></div>
<div class="line">       <span class="stringliteral">&quot; -x statefile   save/restore stream state information to this file\n&quot;</span></div>
<div class="line">       <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">       <span class="stringliteral">&quot; [host][:][port]  Address of the DataLink server in host:port format\n&quot;</span></div>
<div class="line">       <span class="stringliteral">&quot;                  if host is omitted (i.e. &#39;:16000&#39;), localhost is assumed\n&quot;</span></div>
<div class="line">       <span class="stringliteral">&quot;                  if :port is omitted (i.e. &#39;localhost&#39;), 16000 is assumed\n\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">}  <span class="comment">/* End of usage() */</span></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="agroup__connection_html_ga3a993121cf88eeb7d74e007ddd2203ec"><div class="ttname"><a href="group__connection.html#ga3a993121cf88eeb7d74e007ddd2203ec">dl_recoverstate</a></div><div class="ttdeci">int dl_recoverstate(DLCP *dlconn, const char *statefile)</div><div class="ttdoc">Recover DataLink connection state from a file.</div><div class="ttdef"><b>Definition:</b> statefile.c:95</div></div>
<div class="ttc" id="agroup__network_html_ga5b31313fabb3c66918276e87695dec16"><div class="ttname"><a href="group__network.html#ga5b31313fabb3c66918276e87695dec16">dl_disconnect</a></div><div class="ttdeci">void dl_disconnect(DLCP *dlconn)</div><div class="ttdoc">Disconnect a DataLink connection.</div><div class="ttdef"><b>Definition:</b> network.c:219</div></div>
<div class="ttc" id="agroup__connection_html_ga7e326b372c26d47a072cd6ec112e1852"><div class="ttname"><a href="group__connection.html#ga7e326b372c26d47a072cd6ec112e1852">dl_savestate</a></div><div class="ttdeci">int dl_savestate(DLCP *dlconn, const char *statefile)</div><div class="ttdoc">Save a DataLink connection state to a file.</div><div class="ttdef"><b>Definition:</b> statefile.c:43</div></div>
<div class="ttc" id="agroup__logging_html_ga01468a28cd2b8d80c420191ece24a8a4"><div class="ttname"><a href="group__logging.html#ga01468a28cd2b8d80c420191ece24a8a4">dl_log</a></div><div class="ttdeci">int dl_log(int level, int verb, const char *format,...)</div><div class="ttdoc">Log a message using the global logging parameters.</div><div class="ttdef"><b>Definition:</b> logging.c:215</div></div>
<div class="ttc" id="agroup__connection_html_gaffcdbcae2611a8c6208243bc2a418149"><div class="ttname"><a href="group__connection.html#gaffcdbcae2611a8c6208243bc2a418149">dl_reject</a></div><div class="ttdeci">int64_t dl_reject(DLCP *dlconn, char *rejectpattern)</div><div class="ttdoc">Set the packet reject parameters for a connection.</div><div class="ttdef"><b>Definition:</b> connection.c:461</div></div>
<div class="ttc" id="alibdali_8h_html_a38e35b13505789106b8895697a16d260"><div class="ttname"><a href="libdali_8h.html#a38e35b13505789106b8895697a16d260">DLPACKET</a></div><div class="ttdeci">#define DLPACKET</div><div class="ttdef"><b>Definition:</b> libdali.h:152</div></div>
<div class="ttc" id="agroup__time-related_html_ga66fcac401763aecfe83deb9f53186752"><div class="ttname"><a href="group__time-related.html#ga66fcac401763aecfe83deb9f53186752">dl_dltime2seedtimestr</a></div><div class="ttdeci">char * dl_dltime2seedtimestr(dltime_t dltime, char *seedtimestr, int8_t subseconds)</div><div class="ttdoc">Generate an time string in SEED format from a dltime_t.</div><div class="ttdef"><b>Definition:</b> timeutils.c:301</div></div>
<div class="ttc" id="agroup__connection_html_ga812ede0c3d5e15ab118c489087b01260"><div class="ttname"><a href="group__connection.html#ga812ede0c3d5e15ab118c489087b01260">dl_getinfo</a></div><div class="ttdeci">int dl_getinfo(DLCP *dlconn, const char *infotype, char *infomatch, char **infodata, size_t maxinfosize)</div><div class="ttdoc">Request information from the DataLink server.</div><div class="ttdef"><b>Definition:</b> connection.c:804</div></div>
<div class="ttc" id="agroup__connection_html_gaf6cbef6eaaad5e0e54bd93af3a4bf728"><div class="ttname"><a href="group__connection.html#gaf6cbef6eaaad5e0e54bd93af3a4bf728">dl_read_streamlist</a></div><div class="ttdeci">char * dl_read_streamlist(DLCP *dlconn, const char *streamfile)</div><div class="ttdoc">Create a compound regular expression from a list in a file.</div><div class="ttdef"><b>Definition:</b> config.c:42</div></div>
<div class="ttc" id="agroup__connection_html_ga823f483f8492e0317a5221c3f02b13d0"><div class="ttname"><a href="group__connection.html#ga823f483f8492e0317a5221c3f02b13d0">dl_position</a></div><div class="ttdeci">int64_t dl_position(DLCP *dlconn, int64_t pktid, dltime_t pkttime)</div><div class="ttdoc">Position the client read position.</div><div class="ttdef"><b>Definition:</b> connection.c:246</div></div>
<div class="ttc" id="alibdali_8h_html"><div class="ttname"><a href="libdali_8h.html">libdali.h</a></div></div>
<div class="ttc" id="agroup__connection_html_ga7603e72f54c34879f86c319239a50e52"><div class="ttname"><a href="group__connection.html#ga7603e72f54c34879f86c319239a50e52">dl_freedlcp</a></div><div class="ttdeci">void dl_freedlcp(DLCP *dlconn)</div><div class="ttdoc">Free a DataLink Connection Parameter (DLCP) structure.</div><div class="ttdef"><b>Definition:</b> connection.c:84</div></div>
<div class="ttc" id="alibdali_8h_html_ac5b738d467a1bbf9325bcc0eaf4f5efa"><div class="ttname"><a href="libdali_8h.html#ac5b738d467a1bbf9325bcc0eaf4f5efa">MAXPACKETSIZE</a></div><div class="ttdeci">#define MAXPACKETSIZE</div><div class="ttdef"><b>Definition:</b> libdali.h:139</div></div>
<div class="ttc" id="agroup__connection_html_gaccca46f231c23fd495bb6d5725e97957"><div class="ttname"><a href="group__connection.html#gaccca46f231c23fd495bb6d5725e97957">dl_collect</a></div><div class="ttdeci">int dl_collect(DLCP *dlconn, DLPacket *packet, void *packetdata, size_t maxdatasize, int8_t endflag)</div><div class="ttdoc">Collect packets streaming from the DataLink server.</div><div class="ttdef"><b>Definition:</b> connection.c:948</div></div>
<div class="ttc" id="agroup__connection_html_ga0a7501ffdf01f73f8e5b1c1b9ca29843"><div class="ttname"><a href="group__connection.html#ga0a7501ffdf01f73f8e5b1c1b9ca29843">dl_match</a></div><div class="ttdeci">int64_t dl_match(DLCP *dlconn, char *matchpattern)</div><div class="ttdoc">Set the packet match parameters for a connection.</div><div class="ttdef"><b>Definition:</b> connection.c:391</div></div>
<div class="ttc" id="agroup__connection_html_ga663e07d45c7acd0377b5f1f4d930b5a7"><div class="ttname"><a href="group__connection.html#ga663e07d45c7acd0377b5f1f4d930b5a7">dl_newdlcp</a></div><div class="ttdeci">DLCP * dl_newdlcp(char *address, char *progname)</div><div class="ttdoc">Create a new DataLink Connection Parameter (DLCP) structure.</div><div class="ttdef"><b>Definition:</b> connection.c:42</div></div>
<div class="ttc" id="agroup__logging_html_ga37eb5ed80e669d3812a2d1f0e23d8500"><div class="ttname"><a href="group__logging.html#ga37eb5ed80e669d3812a2d1f0e23d8500">dl_loginit</a></div><div class="ttdeci">void dl_loginit(int verbosity, void(*log_print)(char *), const char *logprefix, void(*diag_print)(char *), const char *errprefix)</div><div class="ttdoc">Initialize global logging system parameters.</div><div class="ttdef"><b>Definition:</b> logging.c:54</div></div>
<div class="ttc" id="agroup__network_html_gac26d1376529c62dc85ae3ae90f2d0279"><div class="ttname"><a href="group__network.html#gac26d1376529c62dc85ae3ae90f2d0279">dl_connect</a></div><div class="ttdeci">SOCKET dl_connect(DLCP *dlconn)</div><div class="ttdoc">Connect to a DataLink server.</div><div class="ttdef"><b>Definition:</b> network.c:51</div></div>
<!-- GitHub corner from https://github.com/tholman/github-corners -->
<a href="https://github.com/iris-edu/libdali" class="github-corner" aria-label="View source on GitHub"><svg width="75" height="75" viewBox="0 0 250 250" style="fill:#442487; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<a href="https://ds.iris.edu"><img style="position: absolute; top: 0; border: 0; right: 75px; height:75px;" src="https://www.iris.edu/hq/files/publications/logos/iris_color_screen.png"></a>
