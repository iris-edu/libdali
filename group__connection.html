<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdali: Connection managment functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libdali
   &#160;<span id="projectnumber">1.8.0</span>
   </div>
   <div id="projectbrief">The DataLink client library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Connection managment functions</div>  </div>
</div><!--header-->
<div class="contents">

<p>Definitions and functions for DataLink connections.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:struct_d_l_c_p__s"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#struct_d_l_c_p__s">DLCP_s</a></td></tr>
<tr class="separator:struct_d_l_c_p__s"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:struct_d_l_packet__s"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#struct_d_l_packet__s">DLPacket_s</a></td></tr>
<tr class="separator:struct_d_l_packet__s"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga663e07d45c7acd0377b5f1f4d930b5a7"><td class="memItemLeft" align="right" valign="top">DLCP *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#ga663e07d45c7acd0377b5f1f4d930b5a7">dl_newdlcp</a> (char *address, char *progname)</td></tr>
<tr class="memdesc:ga663e07d45c7acd0377b5f1f4d930b5a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new DataLink Connection Parameter (DLCP) structure.  <a href="group__connection.html#ga663e07d45c7acd0377b5f1f4d930b5a7">More...</a><br /></td></tr>
<tr class="separator:ga663e07d45c7acd0377b5f1f4d930b5a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7603e72f54c34879f86c319239a50e52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#ga7603e72f54c34879f86c319239a50e52">dl_freedlcp</a> (DLCP *dlconn)</td></tr>
<tr class="memdesc:ga7603e72f54c34879f86c319239a50e52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a DataLink Connection Parameter (DLCP) structure.  <a href="group__connection.html#ga7603e72f54c34879f86c319239a50e52">More...</a><br /></td></tr>
<tr class="separator:ga7603e72f54c34879f86c319239a50e52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38b35bee3faee3f24543feda8ecc3a6c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#ga38b35bee3faee3f24543feda8ecc3a6c">dl_exchangeIDs</a> (DLCP *dlconn, int parseresp)</td></tr>
<tr class="memdesc:ga38b35bee3faee3f24543feda8ecc3a6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the ID command to the DataLink server and parse response.  <a href="group__connection.html#ga38b35bee3faee3f24543feda8ecc3a6c">More...</a><br /></td></tr>
<tr class="separator:ga38b35bee3faee3f24543feda8ecc3a6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga823f483f8492e0317a5221c3f02b13d0"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#ga823f483f8492e0317a5221c3f02b13d0">dl_position</a> (DLCP *dlconn, int64_t pktid, <a class="el" href="group__time-related.html#gad46ecd16ed2b512a60d5f948fa15a31f">dltime_t</a> pkttime)</td></tr>
<tr class="memdesc:ga823f483f8492e0317a5221c3f02b13d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Position the client read position.  <a href="group__connection.html#ga823f483f8492e0317a5221c3f02b13d0">More...</a><br /></td></tr>
<tr class="separator:ga823f483f8492e0317a5221c3f02b13d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab8bc14b495d971ea3b119bfc3796b00f"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#gab8bc14b495d971ea3b119bfc3796b00f">dl_position_after</a> (DLCP *dlconn, <a class="el" href="group__time-related.html#gad46ecd16ed2b512a60d5f948fa15a31f">dltime_t</a> datatime)</td></tr>
<tr class="memdesc:gab8bc14b495d971ea3b119bfc3796b00f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Position the client read position based on data time.  <a href="group__connection.html#gab8bc14b495d971ea3b119bfc3796b00f">More...</a><br /></td></tr>
<tr class="separator:gab8bc14b495d971ea3b119bfc3796b00f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0a7501ffdf01f73f8e5b1c1b9ca29843"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#ga0a7501ffdf01f73f8e5b1c1b9ca29843">dl_match</a> (DLCP *dlconn, char *matchpattern)</td></tr>
<tr class="memdesc:ga0a7501ffdf01f73f8e5b1c1b9ca29843"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the packet match parameters for a connection.  <a href="group__connection.html#ga0a7501ffdf01f73f8e5b1c1b9ca29843">More...</a><br /></td></tr>
<tr class="separator:ga0a7501ffdf01f73f8e5b1c1b9ca29843"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaffcdbcae2611a8c6208243bc2a418149"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#gaffcdbcae2611a8c6208243bc2a418149">dl_reject</a> (DLCP *dlconn, char *rejectpattern)</td></tr>
<tr class="memdesc:gaffcdbcae2611a8c6208243bc2a418149"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the packet reject parameters for a connection.  <a href="group__connection.html#gaffcdbcae2611a8c6208243bc2a418149">More...</a><br /></td></tr>
<tr class="separator:gaffcdbcae2611a8c6208243bc2a418149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6a21194a1a308eb91db0d32bced621f8"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#ga6a21194a1a308eb91db0d32bced621f8">dl_write</a> (DLCP *dlconn, void *packet, int packetlen, char *streamid, <a class="el" href="group__time-related.html#gad46ecd16ed2b512a60d5f948fa15a31f">dltime_t</a> datastart, <a class="el" href="group__time-related.html#gad46ecd16ed2b512a60d5f948fa15a31f">dltime_t</a> dataend, int ack)</td></tr>
<tr class="memdesc:ga6a21194a1a308eb91db0d32bced621f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a packet to the DataLink server.  <a href="group__connection.html#ga6a21194a1a308eb91db0d32bced621f8">More...</a><br /></td></tr>
<tr class="separator:ga6a21194a1a308eb91db0d32bced621f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9a49f3842de1a14030b20e665bfcbf31"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#ga9a49f3842de1a14030b20e665bfcbf31">dl_read</a> (DLCP *dlconn, int64_t pktid, DLPacket *packet, void *packetdata, size_t maxdatasize)</td></tr>
<tr class="memdesc:ga9a49f3842de1a14030b20e665bfcbf31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request a packet from the DataLink server.  <a href="group__connection.html#ga9a49f3842de1a14030b20e665bfcbf31">More...</a><br /></td></tr>
<tr class="separator:ga9a49f3842de1a14030b20e665bfcbf31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga812ede0c3d5e15ab118c489087b01260"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#ga812ede0c3d5e15ab118c489087b01260">dl_getinfo</a> (DLCP *dlconn, const char *infotype, char *infomatch, char **infodata, size_t maxinfosize)</td></tr>
<tr class="memdesc:ga812ede0c3d5e15ab118c489087b01260"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request information from the DataLink server.  <a href="group__connection.html#ga812ede0c3d5e15ab118c489087b01260">More...</a><br /></td></tr>
<tr class="separator:ga812ede0c3d5e15ab118c489087b01260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaccca46f231c23fd495bb6d5725e97957"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#gaccca46f231c23fd495bb6d5725e97957">dl_collect</a> (DLCP *dlconn, DLPacket *packet, void *packetdata, size_t maxdatasize, int8_t endflag)</td></tr>
<tr class="memdesc:gaccca46f231c23fd495bb6d5725e97957"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collect packets streaming from the DataLink server.  <a href="group__connection.html#gaccca46f231c23fd495bb6d5725e97957">More...</a><br /></td></tr>
<tr class="separator:gaccca46f231c23fd495bb6d5725e97957"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa1343fa010d7cce001da5fb4a231dcd7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#gaa1343fa010d7cce001da5fb4a231dcd7">dl_collect_nb</a> (DLCP *dlconn, DLPacket *packet, void *packetdata, size_t maxdatasize, int8_t endflag)</td></tr>
<tr class="memdesc:gaa1343fa010d7cce001da5fb4a231dcd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collect packets streaming from the DataLink server without blocking.  <a href="group__connection.html#gaa1343fa010d7cce001da5fb4a231dcd7">More...</a><br /></td></tr>
<tr class="separator:gaa1343fa010d7cce001da5fb4a231dcd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga28610d15c30459cb171beaa6954798a4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#ga28610d15c30459cb171beaa6954798a4">dl_handlereply</a> (DLCP *dlconn, void *buffer, int buflen, int64_t *value)</td></tr>
<tr class="memdesc:ga28610d15c30459cb171beaa6954798a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle the server reply to a command.  <a href="group__connection.html#ga28610d15c30459cb171beaa6954798a4">More...</a><br /></td></tr>
<tr class="separator:ga28610d15c30459cb171beaa6954798a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa357699d12a48e074de595f30e3565fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#gaa357699d12a48e074de595f30e3565fb">dl_terminate</a> (DLCP *dlconn)</td></tr>
<tr class="memdesc:gaa357699d12a48e074de595f30e3565fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the terminate parameter of a DataLink connection.  <a href="group__connection.html#gaa357699d12a48e074de595f30e3565fb">More...</a><br /></td></tr>
<tr class="separator:gaa357699d12a48e074de595f30e3565fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf6cbef6eaaad5e0e54bd93af3a4bf728"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#gaf6cbef6eaaad5e0e54bd93af3a4bf728">dl_read_streamlist</a> (DLCP *dlconn, const char *streamfile)</td></tr>
<tr class="memdesc:gaf6cbef6eaaad5e0e54bd93af3a4bf728"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a compound regular expression from a list in a file.  <a href="group__connection.html#gaf6cbef6eaaad5e0e54bd93af3a4bf728">More...</a><br /></td></tr>
<tr class="separator:gaf6cbef6eaaad5e0e54bd93af3a4bf728"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a993121cf88eeb7d74e007ddd2203ec"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#ga3a993121cf88eeb7d74e007ddd2203ec">dl_recoverstate</a> (DLCP *dlconn, const char *statefile)</td></tr>
<tr class="memdesc:ga3a993121cf88eeb7d74e007ddd2203ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recover DataLink connection state from a file.  <a href="group__connection.html#ga3a993121cf88eeb7d74e007ddd2203ec">More...</a><br /></td></tr>
<tr class="separator:ga3a993121cf88eeb7d74e007ddd2203ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7e326b372c26d47a072cd6ec112e1852"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__connection.html#ga7e326b372c26d47a072cd6ec112e1852">dl_savestate</a> (DLCP *dlconn, const char *statefile)</td></tr>
<tr class="memdesc:ga7e326b372c26d47a072cd6ec112e1852"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save a DataLink connection state to a file.  <a href="group__connection.html#ga7e326b372c26d47a072cd6ec112e1852">More...</a><br /></td></tr>
<tr class="separator:ga7e326b372c26d47a072cd6ec112e1852"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Definitions and functions for DataLink connections. </p>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="struct_d_l_c_p__s" id="struct_d_l_c_p__s"></a>
<h2 class="memtitle"><span class="permalink"><a href="#struct_d_l_c_p__s">&#9670;&nbsp;</a></span>DLCP_s</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct DLCP_s</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>DataLink connection parameters </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a2809253e5b337f19b9364d46e368cd7b"></a>char</td>
<td class="fieldname">
addr[100]</td>
<td class="fielddoc">
<p>The host:port of DataLink server </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a97b7938a2cd3a8cfa53f834cca723f55"></a>char</td>
<td class="fieldname">
clientid[200]</td>
<td class="fielddoc">
<p>Client program ID as "progname:username:pid:arch", see <a class="el" href="group__utility-functions.html#gaf7c5c93c1ef3960becc21d5c7a583cef" title="Generate a DataLink client ID from system &amp; process information.">dlp_genclientid()</a> </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a18b17b1a0c656eea9469e934746c9049"></a>int</td>
<td class="fieldname">
keepalive</td>
<td class="fielddoc">
<p>Interval to send keepalive/heartbeat (seconds) </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a821eeb7025c45a021c2cedcd3cde7d4c"></a>int</td>
<td class="fieldname">
iotimeout</td>
<td class="fielddoc">
<p>Timeout for network I/O operations (seconds) </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a72cd7b06d4208e54dfb6c7a0cc533897"></a><a class="el" href="libdali_8h.html#aff55fe551a9992a54ec54621c524d0a4">SOCKET</a></td>
<td class="fieldname">
link</td>
<td class="fielddoc">
<p>The network socket descriptor, maintained internally </p>
</td></tr>
<tr><td class="fieldtype">
<a id="ae48d0dc0fb7b53935350ec13e65e91ff"></a>float</td>
<td class="fieldname">
serverproto</td>
<td class="fielddoc">
<p>Server version of the DataLink protocol, maintained internally </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a2738400592b67f12dadbab739ffd5131"></a>int32_t</td>
<td class="fieldname">
maxpktsize</td>
<td class="fielddoc">
<p>Maximum packet size for server, maintained internally </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a18cd915f9afa5a6b6add7c939d0a1b58"></a>int8_t</td>
<td class="fieldname">
writeperm</td>
<td class="fielddoc">
<p>Write permission status from server, maintained internally </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a8fe445744fce413dad18cba20327f9cc"></a>int64_t</td>
<td class="fieldname">
pktid</td>
<td class="fielddoc">
<p>Packet ID of last packet received, maintained internally </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a2fad3eb1b3143340c30c84e687d04e06"></a><a class="el" href="group__time-related.html#gad46ecd16ed2b512a60d5f948fa15a31f">dltime_t</a></td>
<td class="fieldname">
pkttime</td>
<td class="fielddoc">
<p>Packet time of last packet received, maintained internally </p>
</td></tr>
<tr><td class="fieldtype">
<a id="ad168b0d3f2a67ae0bf6f73558061b7ef"></a>int8_t</td>
<td class="fieldname">
keepalive_trig</td>
<td class="fielddoc">
<p>Send keepalive trigger, maintained internally </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a30517427d868512d3d5cf99c32322100"></a><a class="el" href="group__time-related.html#gad46ecd16ed2b512a60d5f948fa15a31f">dltime_t</a></td>
<td class="fieldname">
keepalive_time</td>
<td class="fielddoc">
<p>Keepalive time stamp, maintained internally </p>
</td></tr>
<tr><td class="fieldtype">
<a id="ae5708d3aec5a9eb97872a028a783c075"></a>int8_t</td>
<td class="fieldname">
terminate</td>
<td class="fielddoc">
<p>Boolean flag to control connection termination, maintained internally </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a4aaa9eb1bc1617fbcc3694a430b86a41"></a>int8_t</td>
<td class="fieldname">
streaming</td>
<td class="fielddoc">
<p>Boolean flag to indicate streaming status, maintained internally </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a27d0e4079f0f9a06f923a499b9eeac5e"></a>DLLog *</td>
<td class="fieldname">
log</td>
<td class="fielddoc">
<p>Logging parameters, maintained internally </p>
</td></tr>
</table>

</div>
</div>
<a name="struct_d_l_packet__s" id="struct_d_l_packet__s"></a>
<h2 class="memtitle"><span class="permalink"><a href="#struct_d_l_packet__s">&#9670;&nbsp;</a></span>DLPacket_s</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct DLPacket_s</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>DataLink packet </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="ae1c6372d84a670bae16d335578a1ed25"></a>char</td>
<td class="fieldname">
streamid[<a class="el" href="libdali_8h.html#ab894ba71c72f6ad947f788d0eb2e8e04">MAXSTREAMID</a>]</td>
<td class="fielddoc">
<p>Stream ID </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a99c262beabe3efa745dbb14a20759f94"></a>int64_t</td>
<td class="fieldname">
pktid</td>
<td class="fielddoc">
<p>Packet ID </p>
</td></tr>
<tr><td class="fieldtype">
<a id="ae201419f715973724eade76770da8b9d"></a><a class="el" href="group__time-related.html#gad46ecd16ed2b512a60d5f948fa15a31f">dltime_t</a></td>
<td class="fieldname">
pkttime</td>
<td class="fielddoc">
<p>Packet time </p>
</td></tr>
<tr><td class="fieldtype">
<a id="ae03e73585f6c54f2bd2f9bb9001af15b"></a><a class="el" href="group__time-related.html#gad46ecd16ed2b512a60d5f948fa15a31f">dltime_t</a></td>
<td class="fieldname">
datastart</td>
<td class="fielddoc">
<p>Data start time </p>
</td></tr>
<tr><td class="fieldtype">
<a id="aef51d38e9b956c3f4937cad6b143fe50"></a><a class="el" href="group__time-related.html#gad46ecd16ed2b512a60d5f948fa15a31f">dltime_t</a></td>
<td class="fieldname">
dataend</td>
<td class="fielddoc">
<p>Data end time </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a61641780f45c159aa61c50e069137c11"></a>int32_t</td>
<td class="fieldname">
datasize</td>
<td class="fielddoc">
<p>Data size in bytes </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga663e07d45c7acd0377b5f1f4d930b5a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga663e07d45c7acd0377b5f1f4d930b5a7">&#9670;&nbsp;</a></span>dl_newdlcp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DLCP* dl_newdlcp </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>progname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new DataLink Connection Parameter (DLCP) structure. </p>
<p>Allocate, initialze and return a pointer to a new DLCP struct.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>Address of DataLink server in "host:port" format </td></tr>
    <tr><td class="paramname">progname</td><td>Name of program, usually argv[0]</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>allocated DLCP struct on success, NULL on error. </dd></dl>

</div>
</div>
<a id="ga7603e72f54c34879f86c319239a50e52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7603e72f54c34879f86c319239a50e52">&#9670;&nbsp;</a></span>dl_freedlcp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dl_freedlcp </td>
          <td>(</td>
          <td class="paramtype">DLCP *&#160;</td>
          <td class="paramname"><em>dlconn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free a DataLink Connection Parameter (DLCP) structure. </p>
<p>Free all memory associated with a DLCP struct.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dlconn</td><td>DLCP to free </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga38b35bee3faee3f24543feda8ecc3a6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga38b35bee3faee3f24543feda8ecc3a6c">&#9670;&nbsp;</a></span>dl_exchangeIDs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dl_exchangeIDs </td>
          <td>(</td>
          <td class="paramtype">DLCP *&#160;</td>
          <td class="paramname"><em>dlconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>parseresp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send the ID command to the DataLink server and parse response. </p>
<p>Send the ID command including the client ID and optionally parse the capability flags from the server response. This routine is always called when a connection is first made using <a class="el" href="group__network.html#gac26d1376529c62dc85ae3ae90f2d0279" title="Connect to a DataLink server.">dl_connect()</a> and shouldn't normally need to be called again.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dlconn</td><td>DataLink Connection Parameters </td></tr>
    <tr><td class="paramname">parseresp</td><td>Flag to control parsing of server response.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on errors, 0 on success. </dd></dl>

</div>
</div>
<a id="ga823f483f8492e0317a5221c3f02b13d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga823f483f8492e0317a5221c3f02b13d0">&#9670;&nbsp;</a></span>dl_position()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t dl_position </td>
          <td>(</td>
          <td class="paramtype">DLCP *&#160;</td>
          <td class="paramname"><em>dlconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>pktid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__time-related.html#gad46ecd16ed2b512a60d5f948fa15a31f">dltime_t</a>&#160;</td>
          <td class="paramname"><em>pkttime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Position the client read position. </p>
<p>Set the client read position to a specified packet ID and packet time. A packet ID and time together uniquely identify a packet in a DataLink server. The packet time must match the packet ID currently in the server's buffer or the positioning request will fail.</p>
<p>As a special case <em>pktid</em> maybe be set to <em>LIBDALI_POSITION_EARLIEST</em> or <em>LIBDALI_POSITION_LATEST</em> to set the client read position to the earliest or latest packet. In both cases the <em>pkttime</em> value is ignored.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dlconn</td><td>DataLink Connection Parameters </td></tr>
    <tr><td class="paramname">pktid</td><td>Packet ID to set position to </td></tr>
    <tr><td class="paramname">pkttime</td><td>Packet time cooresponding to <em>pktid</em> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A positive packet ID on success, 0 when packet is not found and -1 on error. </dd></dl>

</div>
</div>
<a id="gab8bc14b495d971ea3b119bfc3796b00f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab8bc14b495d971ea3b119bfc3796b00f">&#9670;&nbsp;</a></span>dl_position_after()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t dl_position_after </td>
          <td>(</td>
          <td class="paramtype">DLCP *&#160;</td>
          <td class="paramname"><em>dlconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__time-related.html#gad46ecd16ed2b512a60d5f948fa15a31f">dltime_t</a>&#160;</td>
          <td class="paramname"><em>datatime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Position the client read position based on data time. </p>
<p>Set the client read position to the first packet with a data end time after a reference <em>datatime</em>. The reference time must be specified as a dltime_t value, see <a class="el" href="group__time-related.html#ga2deac0dfe42843e14d9e79e537061b90" title="Convert specified time values to a dltime_t value.">dl_time2dltime()</a> and friends to generate these time values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dlconn</td><td>DataLink Connection Parameters </td></tr>
    <tr><td class="paramname">datatime</td><td>Reference data time as a dltime_t value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A positive packet ID on success and -1 on error. </dd></dl>

</div>
</div>
<a id="ga0a7501ffdf01f73f8e5b1c1b9ca29843"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0a7501ffdf01f73f8e5b1c1b9ca29843">&#9670;&nbsp;</a></span>dl_match()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t dl_match </td>
          <td>(</td>
          <td class="paramtype">DLCP *&#160;</td>
          <td class="paramname"><em>dlconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>matchpattern</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the packet match parameters for a connection. </p>
<p>Send new match pattern to server or reset matching. If <em>matchpattern</em> is NULL a zero length pattern command is sent to the server which resets the client matching setting.</p>
<p>The packet match pattern limits which packets are sent to the client in streaming mode, this is the mode used for <a class="el" href="group__connection.html#gaccca46f231c23fd495bb6d5725e97957" title="Collect packets streaming from the DataLink server.">dl_collect()</a> and <a class="el" href="group__connection.html#gaa1343fa010d7cce001da5fb4a231dcd7" title="Collect packets streaming from the DataLink server without blocking.">dl_collect_nb()</a> requests.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dlconn</td><td>DataLink Connection Parameters </td></tr>
    <tr><td class="paramname">matchpattern</td><td>Match regular expression</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the count of currently matched streams on success and -1 on error. </dd></dl>

</div>
</div>
<a id="gaffcdbcae2611a8c6208243bc2a418149"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaffcdbcae2611a8c6208243bc2a418149">&#9670;&nbsp;</a></span>dl_reject()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t dl_reject </td>
          <td>(</td>
          <td class="paramtype">DLCP *&#160;</td>
          <td class="paramname"><em>dlconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>rejectpattern</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the packet reject parameters for a connection. </p>
<p>Send new reject pattern to server or reset rejecting. If <em>rejectpattern</em> is NULL a zero length pattern command is sent to the server which resets the client rejecting setting.</p>
<p>The packet reject pattern limits which packets are sent to the client in streaming mode, this is the mode used for <a class="el" href="group__connection.html#gaccca46f231c23fd495bb6d5725e97957" title="Collect packets streaming from the DataLink server.">dl_collect()</a> and <a class="el" href="group__connection.html#gaa1343fa010d7cce001da5fb4a231dcd7" title="Collect packets streaming from the DataLink server without blocking.">dl_collect_nb()</a> requests.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dlconn</td><td>DataLink Connection Parameters </td></tr>
    <tr><td class="paramname">rejectpattern</td><td>Reject regular expression</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the count of currently rejected streams on success and -1 on error. </dd></dl>

</div>
</div>
<a id="ga6a21194a1a308eb91db0d32bced621f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6a21194a1a308eb91db0d32bced621f8">&#9670;&nbsp;</a></span>dl_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t dl_write </td>
          <td>(</td>
          <td class="paramtype">DLCP *&#160;</td>
          <td class="paramname"><em>dlconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>packetlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>streamid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__time-related.html#gad46ecd16ed2b512a60d5f948fa15a31f">dltime_t</a>&#160;</td>
          <td class="paramname"><em>datastart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__time-related.html#gad46ecd16ed2b512a60d5f948fa15a31f">dltime_t</a>&#160;</td>
          <td class="paramname"><em>dataend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ack</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a packet to the DataLink server. </p>
<p>Send a packet to the server and optionally request and process an acknowledgement from the server. An appropriate DataLink packet header is created from the supplied parameters and sent with the packet data.</p>
<p>When an acknowledgement from the server has been requested this routine will receive the response from the server and parse it, a successful acknowledgement is indicated by the return value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dlconn</td><td>DataLink Connection Parameters </td></tr>
    <tr><td class="paramname">packet</td><td>Packet data buffer to send </td></tr>
    <tr><td class="paramname">packetlen</td><td>Length of data in bytes to send from <em>packet</em> </td></tr>
    <tr><td class="paramname">streamid</td><td>Stream ID of packet </td></tr>
    <tr><td class="paramname">datastart</td><td>Data start time for packet </td></tr>
    <tr><td class="paramname">dataend</td><td>Data end time for packet </td></tr>
    <tr><td class="paramname">ack</td><td>Acknowledgement flag, if true request acknowledgement</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error and 0 on success when no acknowledgement is requested and a positive packet ID on success when acknowledgement is requested. </dd></dl>

</div>
</div>
<a id="ga9a49f3842de1a14030b20e665bfcbf31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9a49f3842de1a14030b20e665bfcbf31">&#9670;&nbsp;</a></span>dl_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dl_read </td>
          <td>(</td>
          <td class="paramtype">DLCP *&#160;</td>
          <td class="paramname"><em>dlconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>pktid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DLPacket *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>packetdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>maxdatasize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request a packet from the DataLink server. </p>
<p>Request a specific packet from the server.</p>
<p>A maximum of <em>maxdatasize</em> will be written to <em>packetdata</em>. If the packet data is larger than this maximum size an error will be logged and 0 will be returned; the packet data will be recv'd and discarded in order to leave the connection in a usable state.</p>
<p>If this routine returns -1 the connection should be considered to be in a bad state and should be shut down.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dlconn</td><td>DataLink Connection Parameters </td></tr>
    <tr><td class="paramname">pktid</td><td>Packet ID to request </td></tr>
    <tr><td class="paramname">packet</td><td>Pointer to a DLPacket struct for the received packet header information </td></tr>
    <tr><td class="paramname">packetdata</td><td>Pointer to a buffer for received packet data </td></tr>
    <tr><td class="paramname">maxdatasize</td><td>Maximum data size to write to <em>packetdata</em> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes of packet data received on success and -1 on error. </dd></dl>

</div>
</div>
<a id="ga812ede0c3d5e15ab118c489087b01260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga812ede0c3d5e15ab118c489087b01260">&#9670;&nbsp;</a></span>dl_getinfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dl_getinfo </td>
          <td>(</td>
          <td class="paramtype">DLCP *&#160;</td>
          <td class="paramname"><em>dlconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>infotype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>infomatch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>infodata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>maxinfosize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request information from the DataLink server. </p>
<p>Request and receive information from the server using the DataLink INFO command. The INFO response is placed in the supplied <em>infodata</em> buffer. All DataLink INFO responses are returned as XML.</p>
<p>If <em>maxinfosize</em> argument is 0 memory will be allocated as needed for the INFO data result and the infodata pointer will be set to this new buffer; it is up to the caller to free this memory. If an infomatch string is supplied it will be appended to the INFO request sent to the server.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dlconn</td><td>DataLink Connection Parameters </td></tr>
    <tr><td class="paramname">infotype</td><td>The INFO type to request </td></tr>
    <tr><td class="paramname">infomatch</td><td>An optional match pattern </td></tr>
    <tr><td class="paramname">infodata</td><td>Buffer to place the INFO response into </td></tr>
    <tr><td class="paramname">maxinfosize</td><td>Maximum number of bytes to write to <em>infodata</em> buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The length of the INFO response in bytes on success and -1 on error. </dd></dl>

</div>
</div>
<a id="gaccca46f231c23fd495bb6d5725e97957"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaccca46f231c23fd495bb6d5725e97957">&#9670;&nbsp;</a></span>dl_collect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dl_collect </td>
          <td>(</td>
          <td class="paramtype">DLCP *&#160;</td>
          <td class="paramname"><em>dlconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DLPacket *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>packetdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>maxdatasize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>endflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Collect packets streaming from the DataLink server. </p>
<p>Collect packets streaming from the DataLink server. If the connection is not already in streaming mode the STREAM command will first be sent. This routine will block until a packet is received sending keepalive packets to the server based on the DLCP.keepalive parameter.</p>
<p>Designed to run in a tight loop at the heart of a client program, this function will return every time a packet is received. On successfully receiving a packet <em>dlpack</em> will be populated and the packet data will be copied into <em>packetdata</em>.</p>
<p>If the endflag is true the ENDSTREAM command is sent which instructs the server to stop streaming packets; a client must continue collecting packets until DLENDED is returned in order to get any packets that were in-the-air when ENDSTREAM was requested. The stream ending sequence must be completed if the connection is to be used after streaming mode.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DLPACKET</td><td>when a packet is received. </td></tr>
    <tr><td class="paramname">DLENDED</td><td>when the stream ending sequence was completed or the connection was shut down. </td></tr>
    <tr><td class="paramname">DLERROR</td><td>when an error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaa1343fa010d7cce001da5fb4a231dcd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa1343fa010d7cce001da5fb4a231dcd7">&#9670;&nbsp;</a></span>dl_collect_nb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dl_collect_nb </td>
          <td>(</td>
          <td class="paramtype">DLCP *&#160;</td>
          <td class="paramname"><em>dlconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DLPacket *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>packetdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>maxdatasize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>endflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Collect packets streaming from the DataLink server without blocking. </p>
<p>Collect packets streaming from the DataLink server. If the connection is not already in streaming mode the STREAM command will first be sent. This routine is a non-blocking version of <a class="el" href="group__connection.html#gaccca46f231c23fd495bb6d5725e97957" title="Collect packets streaming from the DataLink server.">dl_collect()</a> and will return quickly whether data is received or not. Keep alive packets are sent to the server based on the DLCP.keepalive parameter.</p>
<p>Designed to run in a tight loop at the heart of a client program, this function will return every time a packet is received. On successfully receiving a packet <em>dlpack</em> will be populated and the packet data will be copied into <em>packetdata</em>.</p>
<p>If the <em>endflag</em> is true the ENDSTREAM command is sent which instructs the server to stop streaming packets; a client must continue collecting packets until DLENDED is returned in order to get any packets that were in-the-air when ENDSTREAM was requested. The stream ending sequence must be completed if the connection is to be used after streaming mode.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DLPACKET</td><td>A packet is received. </td></tr>
    <tr><td class="paramname">DLNOPACKET</td><td>No packet is received. </td></tr>
    <tr><td class="paramname">DLENDED</td><td>when the stream ending sequence was completed or the connection was shut down. </td></tr>
    <tr><td class="paramname">DLERROR</td><td>when an error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga28610d15c30459cb171beaa6954798a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga28610d15c30459cb171beaa6954798a4">&#9670;&nbsp;</a></span>dl_handlereply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dl_handlereply </td>
          <td>(</td>
          <td class="paramtype">DLCP *&#160;</td>
          <td class="paramname"><em>dlconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>buflen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle the server reply to a command. </p>
<p>Handle the server reply to a command. This routine is used by other library routines to process replies from the server.</p>
<p>Server replies are of the form:</p>
<p>"OK|ERROR value size"</p>
<p>followed by an optional server message of size bytes. If size is greater than zero it will be read from the connection and placed into <em>buffer</em>. The server message, if included, will always be a NULL-terminated string.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Error </td></tr>
    <tr><td class="paramname">0</td><td>"OK" received </td></tr>
    <tr><td class="paramname">1</td><td>"ERROR" received </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaa357699d12a48e074de595f30e3565fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa357699d12a48e074de595f30e3565fb">&#9670;&nbsp;</a></span>dl_terminate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dl_terminate </td>
          <td>(</td>
          <td class="paramtype">DLCP *&#160;</td>
          <td class="paramname"><em>dlconn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the terminate parameter of a DataLink connection. </p>
<p>Set the terminate parameter/flag in the <em>DLCP</em> and log a diagnostic message indicating that the connection is terminating. Some of the library routines watch the terminate parameter as an indication that the client program is requesting a shut down. This routine is typically used in a signal handler. </p>

</div>
</div>
<a id="gaf6cbef6eaaad5e0e54bd93af3a4bf728"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf6cbef6eaaad5e0e54bd93af3a4bf728">&#9670;&nbsp;</a></span>dl_read_streamlist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* dl_read_streamlist </td>
          <td>(</td>
          <td class="paramtype">DLCP *&#160;</td>
          <td class="paramname"><em>dlconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>streamfile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a compound regular expression from a list in a file. </p>
<p>Read a list of stream regular expressions from a file and create a compound regular expression. The caller is responsible for free'ing the returned string.</p>
<dl class="section return"><dt>Returns</dt><dd>A composite regex pattern on success and NULL on error. </dd></dl>

</div>
</div>
<a id="ga3a993121cf88eeb7d74e007ddd2203ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3a993121cf88eeb7d74e007ddd2203ec">&#9670;&nbsp;</a></span>dl_recoverstate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dl_recoverstate </td>
          <td>(</td>
          <td class="paramtype">DLCP *&#160;</td>
          <td class="paramname"><em>dlconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>statefile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recover DataLink connection state from a file. </p>
<p>Recover connection state from a state file and set the state parameters in a given DataLink Connection Paramters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dlconn</td><td>DataLink Connection Parameters </td></tr>
    <tr><td class="paramname">statefile</td><td>File to recover state from</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Error </td></tr>
    <tr><td class="paramname">0</td><td>Completed successfully </td></tr>
    <tr><td class="paramname">1</td><td>File could not be opened (probably not found) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga7e326b372c26d47a072cd6ec112e1852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7e326b372c26d47a072cd6ec112e1852">&#9670;&nbsp;</a></span>dl_savestate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dl_savestate </td>
          <td>(</td>
          <td class="paramtype">DLCP *&#160;</td>
          <td class="paramname"><em>dlconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>statefile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save a DataLink connection state to a file. </p>
<p>Save the all the current the sequence numbers and time stamps into the given state file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dlconn</td><td>DataLink Connection Parameters </td></tr>
    <tr><td class="paramname">statefile</td><td>File to save state to</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Error </td></tr>
    <tr><td class="paramname">0</td><td>Completed successfully </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- GitHub corner from https://github.com/tholman/github-corners -->
<a href="https://github.com/iris-edu/libdali" class="github-corner" aria-label="View source on GitHub"><svg width="75" height="75" viewBox="0 0 250 250" style="fill:#442487; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<a href="https://ds.iris.edu"><img style="position: absolute; top: 0; border: 0; right: 75px; height:75px;" src="https://www.iris.edu/hq/files/publications/logos/iris_color_screen.png"></a>
